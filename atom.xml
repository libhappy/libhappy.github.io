<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title><![CDATA[LibHappy]]></title>
  <subtitle><![CDATA[Happy Life, Happy Coding.]]></subtitle>
  <link href="/atom.xml" rel="self"/>
  <link href="http://libhappy.com/"/>
  <updated>2015-12-13T14:54:42.173Z</updated>
  <id>http://libhappy.com/</id>
  
  <author>
    <name><![CDATA[Arthur]]></name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title><![CDATA[用Hexo搭建静态博客（三）, 设置自定义域名]]></title>
    <link href="http://libhappy.com/2015/10/build-hexo-blog3/"/>
    <id>http://libhappy.com/2015/10/build-hexo-blog3/</id>
    <published>2015-10-30T14:32:02.000Z</published>
    <updated>2015-12-13T14:54:42.173Z</updated>
    <content type="html"><![CDATA[<p>在之前的文章中介绍了如何<a href="/2015/10/bulid-hexo-blog1/">用hexo来搭建静态博客</a>以及<a href="/2015/10/bulid-hexo-blog2/">将网页部署至github及gitcafe</a>。完成部署之后，可以通过github及gitcafe分配的pages二级域名来访问博客，比如<code>username.github.io</code>。通过将自己的博客绑定至自己购买的域名可以更加方便的访问，下面将介绍如何购买一个域名及将自定义域名绑定至github及gitcafe。<br><a id="more"></a></p>
<h1 id="购买域名">购买域名</h1><p>首先要购买一个域名，推荐国外的<a href="https://www.godaddy.com/" target="_blank" rel="external">GoDaddy</a>, 当然国内的域名提供商也是可以的。</p>
<h1 id="设置域名解析服务">设置域名解析服务</h1><p>购买到心仪的域名后进入域名设置页面设置域名解析服务。由于godaddy的域名解析服务位于国外，速度稍有影响，因此可以使用国内的免费域名解析服务<a href="https://www.dnspod.cn/" target="_blank" rel="external">DNSPod</a>，同时DNSPod还支持根据不同线路解析到不同地址，因此可以利用此功能针对不同地区的访问者分别解析到github及gitcafe以提高访问速度。</p>
<p>使用DNSPod来进行域名解析首先要将域名解析服务商(nameserver)地址更换为DNSPod提供的地址:<br><figure class="highlight stylus"><figcaption><span>nameserver</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">F1G1NS1<span class="class">.DNSPOD</span><span class="class">.NET</span></span><br><span class="line">F1G1NS2<span class="class">.DNSPOD</span><span class="class">.NET</span></span><br></pre></td></tr></table></figure></p>
<p>GoDaddy的具体设置可以查看DNSPod上的<a href="https://support.dnspod.cn/Kb/showarticle/?qtype=%E5%8A%9F%E8%83%BD%E4%BB%8B%E7%BB%8D%E5%8F%8A%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B&amp;tsid=42" target="_blank" rel="external">帮助教程</a>。</p>
<h1 id="设置CNAME">设置CNAME</h1><h2 id="github设置CNAME">github设置CNAME</h2><p>github的CNAME设置需要在github pages 的根目录下创建CNAME文件并在其中写入自定义域名，但是直接在github pages中创建，下次通过git push提交博客后会被删除。因此需要在Hexo的source目录下的创建CNAME文件，并在其中写入自定义域名。之后每次提交博客时会随之提交CNAME文件。</p>
<h2 id="gitcafe设置CNAME">gitcafe设置CNAME</h2><p>gitcafe的CNAME更为方便，登陆gitcafe后在<code>项目管理</code>–<code>域名管理</code>下的<code>自定义域名</code>中添加自定义域名即可。</p>
<h1 id="设置DNS解析">设置DNS解析</h1><p>最后需要注册DNSPod并设置DNS解析。之前已经在Godaddy中将域名解析服务设置为DNSPod。直接登陆DNSPod，添加自定义域名，在添加的域名中添加如下记录：<br><img src="https://farm1.staticflickr.com/678/22594923969_f316996f4b_z.jpg" title="DNSPod域名解析记录设置" alt="dnspod-setting"><br>这样设置可以区分不同的地区分别访问托管在github及gitcafe上的博客，加快博客访问速度。如果只是使用其中一项服务，只需添加对应记录即可。</p>
<p>等待域名解析生效（一般需要几分钟到一天不等）后，就可以用自定义的域名直接访问博客了。</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>在之前的文章中介绍了如何<a href="/2015/10/bulid-hexo-blog1/">用hexo来搭建静态博客</a>以及<a href="/2015/10/bulid-hexo-blog2/">将网页部署至github及gitcafe</a>。完成部署之后，可以通过github及gitcafe分配的pages二级域名来访问博客，比如<code>username.github.io</code>。通过将自己的博客绑定至自己购买的域名可以更加方便的访问，下面将介绍如何购买一个域名及将自定义域名绑定至github及gitcafe。<br>]]>
    
    </summary>
    
      <category term="hexo" scheme="http://libhappy.com/tags/hexo/"/>
    
      <category term="博客" scheme="http://libhappy.com/tags/%E5%8D%9A%E5%AE%A2/"/>
    
      <category term="域名" scheme="http://libhappy.com/tags/%E5%9F%9F%E5%90%8D/"/>
    
      <category term="Hexo" scheme="http://libhappy.com/categories/Hexo/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[用Hexo搭建静态博客（二）, 将网页部署至github与gitcafe并使用SSH认证]]></title>
    <link href="http://libhappy.com/2015/10/build-hexo-blog2/"/>
    <id>http://libhappy.com/2015/10/build-hexo-blog2/</id>
    <published>2015-10-27T08:31:14.000Z</published>
    <updated>2015-10-27T14:08:35.160Z</updated>
    <content type="html"><![CDATA[<p>在<a href="/2015/10/bulid-hexo-blog1/">上一篇</a>文章中介绍了如何在本地搭建Hexo以及用Hexo书写博客的基本操作。在这篇文章中将介绍如何将创建的博客发布至github及gitcafe的静态页面。通过为github及gitcafe添加ssh验证来跳过推送页面时输入用户名及密码。<br><a id="more"></a></p>
<h1 id="注册github及gitcafe账号">注册github及gitcafe账号</h1><p>github及gitcafe都支持pages网页托管服务，首先选择要托管的服务注册账号。当然也可以同时将博客发布至github和gitcafe，对于国内及国外不同用户分别访问不同的服务上的博客。</p>
<h1 id="将博客发布至github">将博客发布至github</h1><p>创建github pages的详细方法可以参考官方<a href="https://help.github.com/categories/github-pages-basics/" target="_blank" rel="external">帮助页面</a>。</p>
<h2 id="创建新的代码仓库">创建新的代码仓库</h2><p>新代码仓库(repository)名必须为<code>username.github.io</code>，其中<code>username</code>为注册github的用户名。</p>
<h2 id="设置用户名及邮箱">设置用户名及邮箱</h2><p>Hexo目录下的<code>.deploy_git</code>文件夹即为需要发布的文件，这是一个git目录。在发布至github之前需要先设置git的用户名及邮箱地址。<br><figure class="highlight stylus"><figcaption><span>D:\hexo\.deploy_git</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user<span class="class">.name</span> <span class="string">"your name"</span></span><br><span class="line">git config --global user<span class="class">.eamil</span> <span class="string">"user@email.com"</span></span><br></pre></td></tr></table></figure></p>
<p>这个命令设置了计算机中全局默认的用户名及邮箱，如果计算机中只有一个git账号的代码，这样设置该账号下的其他仓库时可以不用再进行设置。<br>但计算机中有多个账号的仓库代码要通过git同步时，就应该只设置该目录下git仓库的用户名及邮箱：<br><figure class="highlight stylus"><figcaption><span>D:\hexo\.deploy_git</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config user<span class="class">.name</span> <span class="string">"your name"</span></span><br><span class="line">git config user<span class="class">.eamil</span> <span class="string">"your@email"</span></span><br></pre></td></tr></table></figure></p>
<h2 id="设置远程仓库地址">设置远程仓库地址</h2><p>将远程仓库地址设置为新建的代码仓库，然后将网页推送至远程仓库：<br><figure class="highlight stylus"><figcaption><span>D:\hexo\.deploy_git</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git remote add origin git@github<span class="class">.com</span>:username<span class="class">.github</span><span class="class">.io</span></span><br><span class="line">git pull origin master</span><br></pre></td></tr></table></figure></p>
<p>一段时间后，直接访问网址<code>username.github.io</code>就可以看到刚发布的博客了。</p>
<h2 id="设置Hexo配置文件">设置Hexo配置文件</h2><p>配置Hexo的站点配置文件，加入远程仓库的信息，以后更新博客时只用执行 <code>hexo d</code>就可以将博客发布到远端了。<br><figure class="highlight less"><figcaption><span>D:\hexo\_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">deploy</span>:</span><br><span class="line">  <span class="attribute">type</span>: git</span><br><span class="line">  <span class="attribute">repository</span>: git<span class="variable">@github</span>.<span class="attribute">com</span>:username.github.io #你的GitHub Pages仓库</span><br><span class="line">  <span class="attribute">branch</span>: master #要推送的分支，github pages默认为master</span><br></pre></td></tr></table></figure></p>
<h1 id="将博客发布至gitcafe">将博客发布至gitcafe</h1><p>由于github 的连接速度并不理想，如果只是面向国内用户，可以将博客发布至gitcafe的pages服务。详细内容可以查看gitcafe的官方<a href="https://gitcafe.com/GitCafe/Help/wiki/Pages-%E7%9B%B8%E5%85%B3%E5%B8%AE%E5%8A%A9" target="_blank" rel="external">帮助文档</a>，具体操作流程与github大同小异。<br>需要注意的是：gitcafe pages 的默认分支为<code>gitcafe-pages</code>，因此推送时要使用<code>gitcafe-pages</code>作为远端分支：<br><figure class="highlight stylus"><figcaption><span>D:\hexo\.deploy_git</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git remote add origin git@gitcafe<span class="class">.com</span>:username<span class="class">.gitcafe</span><span class="class">.io</span></span><br><span class="line">git checkout -<span class="tag">b</span> gitcafe-pages</span><br><span class="line">git pull origin gitcafe-pages</span><br></pre></td></tr></table></figure></p>
<p>同时Hexo配置文件中的<code>branch</code>也要改为<code>gitcafe-pages</code>。<br><figure class="highlight less"><figcaption><span>D:\hexo\_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">deploy</span>:</span><br><span class="line">  <span class="attribute">type</span>: git</span><br><span class="line">  <span class="attribute">repository</span>: git<span class="variable">@gitcafe</span>.<span class="attribute">com</span>:username.gitcafe.io #你的GitCafe Pages仓库</span><br><span class="line">  <span class="attribute">branch</span>: gitcafe-pages #要推送的分支，gitcafe pages默认为gitcafe-pages</span><br></pre></td></tr></table></figure></p>
<p>发布后稍等片刻，直接访问<code>username.gitcafe.io</code>就可以看到刚发布的博客了。</p>
<h1 id="同时将博客发布至github与gitcafe">同时将博客发布至github与gitcafe</h1><p>如果同时设置了github及gitcafe，也可以将博客同时发布至两个服务。但是本地仓库的信息相同，因此需要使用相同的邮箱注册两个服务。在设置好远端服务后，如下修改Hexo站点配置文件：<br><figure class="highlight less"><figcaption><span>D:\hexo\_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">deploy</span>:</span><br><span class="line">  <span class="attribute">type</span>: git</span><br><span class="line">  <span class="attribute">repo</span>:</span><br><span class="line">    <span class="attribute">github</span>: git<span class="variable">@github</span>.<span class="attribute">com</span>:username.github.io, master</span><br><span class="line">    <span class="attribute">gitcafe</span>: git<span class="variable">@gitcafe</span>.<span class="attribute">com</span>:username.gitcafe.io, gitcafe-pages</span><br></pre></td></tr></table></figure></p>
<p>然后<code>hexo d</code>发布博客后，分别打开对应服务的网址就可以看到发布的博客了。</p>
<h1 id="使用ssh密钥登陆">使用ssh密钥登陆</h1><p>使用ssh密钥登陆github和gitcafe可以跳过密码输入，如果同时拥有两个服务也可以设置不同的密钥登陆，提升安全性。</p>
<h2 id="生成ssh密钥">生成ssh密钥</h2><p>切换到ssh默认的密匙保存目录<code>C:\Users\username\.ssh</code>，如果不存在则手动创建。<br>用以下命令生成与邮箱<code>user@email.com</code>（即注册github及gitcafe的邮箱）对应的密钥：<br><figure class="highlight mathematica"><figcaption><span>C:\Users\username\.ssh</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -<span class="keyword">C</span> <span class="string">"user@email.com"</span></span><br></pre></td></tr></table></figure></p>
<p>首先会提示输入密钥名称<br><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Generating <span class="keyword">public</span>/<span class="keyword">private</span> rsa <span class="keyword">key</span> pair.</span><br><span class="line">Enter file <span class="keyword">in</span> which <span class="keyword">to</span> save the <span class="keyword">key</span> (/c/Users/username/.ssh/id_rsa):</span><br></pre></td></tr></table></figure></p>
<p>如果没有设置过ssh密钥，使用默认的<code>id_rsa</code>即可。同时如果想在github及gitcafe上启用不同的密钥，在生成密钥时应采用不同的名称便于区分。<br>之后会提示输入密钥密码，该密码用来加密密钥，使用此密钥时需要输入该密码，留空则表示不使用密码。<br><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Enter passphrase (empty <span class="keyword">for</span> <span class="literal">no</span> passphrase):</span><br><span class="line">Enter same passphrase <span class="attribute">again</span>:</span><br></pre></td></tr></table></figure></p>
<p>然后会提示你成功生成了密钥，假设此时生成的密钥对为<code>github_rsa</code>与<code>github_rsa.pub</code>。相应的也可以为gitcafe网站生成不同的密钥对。</p>
<h2 id="将公钥上传至github及gitcafe">将公钥上传至github及gitcafe</h2><p>登陆github，打开<code>Settings</code>中的<code>SSH keys</code>点击<code>Add SSH key</code>，输入SSH key的名称，将.pub文件中的内容全部粘贴至<code>Key</code>中，点击<code>Add key</code>保存这个密钥。<br>gitcafe 中的设置完全相同，只是其SSH key管理的设置在<code>账户设置</code>–<code>SSH 公钥管理</code>中，相同的方式添加.pub公钥的信息即可。</p>
<h2 id="设置ssh用户配置文件">设置ssh用户配置文件</h2><p>在ssh用户配置文件<code>C:\Users\username\.ssh\config</code>中指定对应服务所使用的私钥，如果该配置文件不存在则直接新建一个。<br><figure class="highlight stylus"><figcaption><span>C:\Users\username\.ssh\config</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="id">#github</span></span><br><span class="line">Host github<span class="class">.com</span>  #昵称</span><br><span class="line">    HostName github<span class="class">.com</span> #指代的网址</span><br><span class="line">    User git</span><br><span class="line">    IdentityFile ~/.ssh/github_rsa #认证私钥路径</span><br><span class="line">    PreferredAuthentications publickey</span><br><span class="line"></span><br><span class="line"><span class="id">#gitcafe</span></span><br><span class="line">Host gitcafe<span class="class">.com</span></span><br><span class="line">    HostName gitcafe<span class="class">.com</span></span><br><span class="line">    User git</span><br><span class="line">    IdentityFile ~/.ssh/gitcafe_rsa</span><br><span class="line">    PreferredAuthentications publickey</span><br></pre></td></tr></table></figure></p>
<p><strong>注意</strong>其中昵称是对应条目的代号，可以随便设置，在git中如果地址中出现该代号将被替换为对应的<code>HostName</code>并用指定的私钥进行认证。因此若计算机中有两个github账户需要用不同的ssh key进行认证，可以如下设置：<br><figure class="highlight crmsh"><figcaption><span>C:\Users\username\.ssh\config</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#github 01</span></span><br><span class="line">Host github01  <span class="comment">#昵称</span></span><br><span class="line">    HostName github.com <span class="comment">#指代的网址</span></span><br><span class="line">    <span class="keyword">User</span> <span class="title">git</span></span><br><span class="line">    IdentityFile ~/.ssh/<span class="number">01</span>_rsa <span class="comment">#认证私钥路径</span></span><br><span class="line">    PreferredAuthentications publickey</span><br><span class="line"></span><br><span class="line"><span class="comment">#github 02</span></span><br><span class="line">Host github02  <span class="comment">#昵称</span></span><br><span class="line">    HostName github.com <span class="comment">#指代的网址</span></span><br><span class="line">    <span class="keyword">User</span> <span class="title">git</span></span><br><span class="line">    IdentityFile ~/.ssh/<span class="number">02</span>_rsa <span class="comment">#认证私钥路径</span></span><br><span class="line">    PreferredAuthentications publickey</span><br></pre></td></tr></table></figure></p>
<p>在设置git远端地址或登陆时，用对应的昵称代替地址中的<code>github.com</code>，比如：<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git remote add origin git@github01:username<span class="class">.github</span><span class="class">.io</span></span><br><span class="line">git remote add origin git@github02:username<span class="class">.github</span><span class="class">.io</span></span><br></pre></td></tr></table></figure></p>
<h2 id="测试_ssh_配置是否正确">测试 ssh 配置是否正确</h2><p>经过以上设置后应该可以用ssh登陆github及gitcafe，用以下命令可以测试配置是否正确。<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 测试github</span></span><br><span class="line"><span class="title">ssh</span> -T git<span class="variable">@github</span>.com</span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试gitcafe</span></span><br><span class="line">ssh -T git<span class="variable">@gitcafe</span>.com</span><br></pre></td></tr></table></figure></p>
<p>如果连接成功，会提示以下信息：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># github</span></span><br><span class="line">Hi USERNAME! Yo<span class="string">u've successfully authenticated, but GitHub does not provide shell access.</span><br><span class="line"></span><br><span class="line"># gitcafe</span><br><span class="line">Hi USERNAME! You'</span>ve successfully authenticated, but GitCafe does <span class="keyword">not</span> provide shell access.</span><br></pre></td></tr></table></figure></p>
<p>测试通过后，就可以使用ssh key来发布博客及提交代码而无需输入密码了。</p>
<p>本文主要介绍了如何将Hexo博客发布至github及gitcafe，以及配置多对ssh公私钥进行git认证。下一篇文章中将介绍如何购买域名及为托管在github及gitcafe上的博客设置自定义域名。</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>在<a href="/2015/10/bulid-hexo-blog1/">上一篇</a>文章中介绍了如何在本地搭建Hexo以及用Hexo书写博客的基本操作。在这篇文章中将介绍如何将创建的博客发布至github及gitcafe的静态页面。通过为github及gitcafe添加ssh验证来跳过推送页面时输入用户名及密码。<br>]]>
    
    </summary>
    
      <category term="gitcafe" scheme="http://libhappy.com/tags/gitcafe/"/>
    
      <category term="github" scheme="http://libhappy.com/tags/github/"/>
    
      <category term="hexo" scheme="http://libhappy.com/tags/hexo/"/>
    
      <category term="ssh" scheme="http://libhappy.com/tags/ssh/"/>
    
      <category term="博客" scheme="http://libhappy.com/tags/%E5%8D%9A%E5%AE%A2/"/>
    
      <category term="多账户" scheme="http://libhappy.com/tags/%E5%A4%9A%E8%B4%A6%E6%88%B7/"/>
    
      <category term="Hexo" scheme="http://libhappy.com/categories/Hexo/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[用Hexo搭建静态博客（一）, Hexo的搭建]]></title>
    <link href="http://libhappy.com/2015/10/bulid-hexo-blog1/"/>
    <id>http://libhappy.com/2015/10/bulid-hexo-blog1/</id>
    <published>2015-10-26T02:38:40.000Z</published>
    <updated>2015-10-26T14:13:15.589Z</updated>
    <content type="html"><![CDATA[<h1 id="Hexo_介绍">Hexo 介绍</h1><p><a href="https://hexo.io/" target="_blank" rel="external">Hexo</a> 是一个基于Node.js的开源静态博客程序，通过markdown书写文章，生成的静态网页可以托管在github及gitcafe上。通过<a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>可以方便的创建自己的博客，本博客即使用Hexo创建并托管在github及gitcafe上。<br><a id="more"></a></p>
<h1 id="依赖程序的安装">依赖程序的安装</h1><p>Hexo 基于Node.js，其部署通过Git进行，以下程序的安装过程仅以Windows平台为例。</p>
<h2 id="安装_Node-js">安装 Node.js</h2><p>到<a href="https://nodejs.org/" target="_blank" rel="external">Node.js</a> 官网下载安装包，直接双击安装。</p>
<h2 id="安装_Git">安装 Git</h2><p>到<a href="https://git-scm.com/downloads" target="_blank" rel="external">Git</a>官网下载安装包，直接双击安装。</p>
<h2 id="验证安装是否正确">验证安装是否正确</h2><p>在开始菜单中打开<code>Git Bash</code>，输入：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">git</span> <span class="tag">--version</span></span><br><span class="line"><span class="tag">git</span> <span class="tag">version</span> 2<span class="class">.5</span><span class="class">.2</span><span class="class">.windows</span><span class="class">.2</span></span><br></pre></td></tr></table></figure></p>
<p>如果如上显示正确的版本号则Git 已正确安装。<br>输入：<br><figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm -v</span><br><span class="line"><span class="number">2.14</span>.<span class="number">7</span></span><br></pre></td></tr></table></figure></p>
<p>显示对应版本号则表示Node.js 已正确安装。</p>
<h1 id="安装与部署_Hexo">安装与部署 Hexo</h1><h2 id="安装Hexo">安装Hexo</h2><p>打开<code>Git Bash</code> 通过npm命令即可安装Hexo：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="operator"><span class="keyword">install</span> hexo-cli -<span class="keyword">g</span></span><br><span class="line">npm <span class="keyword">install</span> hexo <span class="comment">--save</span></span></span><br></pre></td></tr></table></figure></p>
<h2 id="初始化_Hexo">初始化 Hexo</h2><p>打开<code>Git Bash</code>并切换到想要存放Hexo的目录下，执行以下命令将在该目录下新建文件夹<code>&lt;folder&gt;</code>并在该文件夹中初始化Hexo：<br><figure class="highlight xml"><figcaption><span>D:\</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo init <span class="tag">&lt;<span class="title">folder</span>&gt;</span></span><br><span class="line">cd <span class="tag">&lt;<span class="title">folder</span>&gt;</span></span><br><span class="line">npm install</span><br></pre></td></tr></table></figure></p>
<p>新建完成后，指定文件夹的目录如下：<br><figure class="highlight bash"><figcaption><span>D:\hexo</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── _config.yml   <span class="comment">#主配置文件</span></span><br><span class="line">├── package.json  <span class="comment">#应用数据，不建议手动修改</span></span><br><span class="line">├── .deploy       <span class="comment">#将部署的静态文件，为git同步目录</span></span><br><span class="line">├── node_modules  <span class="comment">#Hexo安装的所有插件</span></span><br><span class="line">├── scaffolds     <span class="comment">#(脚手架)新建文章的模板文件</span></span><br><span class="line">├── scripts       <span class="comment">#自定义的随程序运行的脚本文件</span></span><br><span class="line">├── <span class="built_in">source</span>        <span class="comment">#博客源文件，文章markdown文件、404和CNAME文件等</span></span><br><span class="line">|   ├── _drafts   <span class="comment">#文章草稿，不会被转换为html</span></span><br><span class="line">|   └── _posts    <span class="comment">#发表的文章</span></span><br><span class="line">└── themes        <span class="comment">#主题文件夹</span></span><br></pre></td></tr></table></figure></p>
<h2 id="本地查看Hexo_博客">本地查看Hexo 博客</h2><p>执行以下命令打开Hexo 本地服务器<br><figure class="highlight livecodeserver"><figcaption><span>D:\hexo</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo server</span><br><span class="line">INFO  Hexo is running <span class="keyword">at</span> <span class="keyword">http</span>://<span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>:<span class="number">4000</span>/. Press Ctrl+C <span class="built_in">to</span> <span class="built_in">stop</span>.</span><br></pre></td></tr></table></figure></p>
<p>在浏览器中打开网址<code>localhost:4000</code>就可以查看默认的Hexo博客。</p>
<h2 id="安装_Hexo_插件">安装 Hexo 插件</h2><p>Hexo 提供了许多插件以提供不同的功能，<a href="https://hexo.io/plugins/" target="_blank" rel="external">插件列表</a>列出了可用的插件。以安装<a href="https://github.com/hexojs/hexo-generator-feed" target="_blank" rel="external">hexo-generator-feed</a>插件为例。<br>该插件可以为博客增加rss订阅支持，在博客目录下打开命令行，输入以下命令即可安装该插件：<br><figure class="highlight sql"><figcaption><span>D:\hexo</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="operator"><span class="keyword">install</span> hexo-generator-feed <span class="comment">--save</span></span></span><br></pre></td></tr></table></figure></p>
<p>安装完成后在主目录的配置文件中可以配置该插件的功能：<br><figure class="highlight crmsh"><figcaption><span>D:\hexo\_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">feed:</span><br><span class="line">  <span class="operator">type</span>: atom</span><br><span class="line">  path: atom.<span class="keyword">xml</span></span><br><span class="line">  <span class="title">limit</span>: <span class="number">20</span></span><br></pre></td></tr></table></figure></p>
<p>然后在页面添加对atom.xml文件的链接即可。<br>其他插件的功能、安装及配置可以查看<a href="https://hexo.io/plugins/" target="_blank" rel="external">插件列表</a>详细了解。</p>
<h2 id="安装_Hexo_主题">安装 Hexo 主题</h2><p>通过安装不同的主题，可以方便的使博客拥有不同的外观，官方的<a href="https://hexo.io/themes/" target="_blank" rel="external">主题列表</a>列举一些主题。<br>这个博客正在用的<a href="https://github.com/iissnan/hexo-theme-next" target="_blank" rel="external">NexT</a>:<br><iframe src="http://notes.iissnan.com/" width="800" height="600" frameborder="0" allowfullscreen></iframe></p>
<p>另一款流行的主题<a href="https://github.com/wuchong/jacman" target="_blank" rel="external">Jacman</a>:<br><iframe src="http://wuchong.me/jacman/" width="800" height="600" frameborder="0" allowfullscreen></iframe></p>
<p>安装Hexo主题十分简单，首先下载主题后解压到主目录下的<code>themes</code>文件夹，建议使用<code>git clone</code>的方式安装主题，便于更新。<br>以安装NexT主题为例，打开命令行，切换到Hexo主目录下：<br><figure class="highlight vim"><figcaption><span>D:\hexo</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone http<span class="variable">s:</span>//github.<span class="keyword">com</span>/iissnan/hexo-theme-<span class="keyword">next</span> themes/<span class="keyword">next</span></span><br></pre></td></tr></table></figure></p>
<p>完成后，主题已被下载到了<code>themes\next</code>目录下。<br>当需要更新主题时，执行以下命令即可：<br><figure class="highlight vim"><figcaption><span>D:\hexo</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cd</span> themes/<span class="keyword">next</span></span><br><span class="line">git pull origin master</span><br></pre></td></tr></table></figure></p>
<p>之后更改主目录中的配置文件<code>_config.yml</code>应用新主题，修改其中的<code>theme</code>字段的值即可：<br><figure class="highlight autoit"><figcaption><span>D:\hexo\_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">theme: <span class="keyword">next</span></span><br><span class="line"><span class="preprocessor"># 注意所有参数名后的冒号“:”后面必须有一个空格</span></span><br></pre></td></tr></table></figure></p>
<p>然后重新生成网页文件即可：<br><figure class="highlight vala"><figcaption><span>D:\hexo</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor"># 清除已经生成的缓存网页文件，只是新增文章时可以不执行该命令</span></span><br><span class="line">hexo clean</span><br><span class="line"><span class="preprocessor"># 生成网页文件，如果生成网页文件有问题，可以尝试先执行上一个clean命令清除缓存再重新生成</span></span><br><span class="line">hexo generate</span><br></pre></td></tr></table></figure></p>
<p><code>hexo generate</code> 也可以用短命令 <code>hexo g</code> 代替。</p>
<p>之后打开本地服务器，查看应用新主题后的博客效果。<br><figure class="highlight axapta"><figcaption><span>D:\hexo</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo <span class="keyword">server</span></span><br></pre></td></tr></table></figure></p>
<h1 id="Hexo_的使用">Hexo 的使用</h1><p>用Hexo书写博客的流程为：</p>
<ol>
<li><code>hexo new &quot;post-name&quot;</code>按照模板文件生成新的文章，该文件位于<code>source/_posts</code>文件夹中</li>
<li>按照<strong>markdown</strong>语法编辑post-name.md文件</li>
<li><code>hexo generate</code>生成新的网页文件</li>
<li><code>hexo deploy</code>部署生成的网页文件</li>
</ol>
<h2 id="Hexo常用命令">Hexo常用命令</h2><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">hexo help                  <span class="preprocessor">#查看hexo所有命令及帮助</span></span><br><span class="line">hexo init                  <span class="preprocessor">#初始化一个目录</span></span><br><span class="line">hexo <span class="keyword">new</span> <span class="string">"post_Name"</span>       <span class="preprocessor">#新建文章</span></span><br><span class="line">hexo <span class="keyword">new</span> page <span class="string">"page_Name"</span>  <span class="preprocessor">#新建页面</span></span><br><span class="line">hexo generate              <span class="preprocessor">#生成网页, 可以在 public 目录查看整个网站的文件</span></span><br><span class="line">hexo <span class="keyword">server</span>                <span class="preprocessor">#打开本地服务器，预览博客</span></span><br><span class="line">hexo deploy                <span class="preprocessor">#部署生成的博客至远端服务器</span></span><br><span class="line">hexo clean                 <span class="preprocessor">#清除缓存网页文件,如果生成的网页有问题可以用此命令清除缓存后重新生成</span></span><br></pre></td></tr></table></figure>
<p>Hexo 中的某些常用命令还支持简写：<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hexo n &lt;=&gt; hexo <span class="keyword">new</span></span><br><span class="line">hexo g &lt;=&gt; hexo generate</span><br><span class="line">hexo s &lt;=&gt; hexo server</span><br><span class="line">hexo d &lt;=&gt; hexo deploy</span><br></pre></td></tr></table></figure></p>
<p>本文主要介绍了Hexo博客本地应用程序的安装以及基本应用，在下一篇文章中将介绍将Hexo生成的博客部署至github及gitcafe上及自定义域名的绑定。</p>
]]></content>
    <summary type="html">
    <![CDATA[<h1 id="Hexo_介绍">Hexo 介绍</h1><p><a href="https://hexo.io/">Hexo</a> 是一个基于Node.js的开源静态博客程序，通过markdown书写文章，生成的静态网页可以托管在github及gitcafe上。通过<a href="https://hexo.io/">Hexo</a>可以方便的创建自己的博客，本博客即使用Hexo创建并托管在github及gitcafe上。<br>]]>
    
    </summary>
    
      <category term="NexT" scheme="http://libhappy.com/tags/NexT/"/>
    
      <category term="blog" scheme="http://libhappy.com/tags/blog/"/>
    
      <category term="hexo" scheme="http://libhappy.com/tags/hexo/"/>
    
      <category term="静态博客" scheme="http://libhappy.com/tags/%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2/"/>
    
      <category term="Hexo" scheme="http://libhappy.com/categories/Hexo/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Python中的super使用]]></title>
    <link href="http://libhappy.com/2015/08/python-usage-super/"/>
    <id>http://libhappy.com/2015/08/python-usage-super/</id>
    <published>2015-08-16T01:46:43.000Z</published>
    <updated>2015-10-26T14:14:40.658Z</updated>
    <content type="html"><![CDATA[<p>Python中子类要调用父类的方法（method），在python2.2之前通常的写法如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__inti__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"enter A"</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"leave A"</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"enter B"</span></span><br><span class="line">        A.__init__(self)</span><br><span class="line">        <span class="keyword">print</span> <span class="string">"leave B"</span></span><br></pre></td></tr></table></figure>
<p>即使用非绑定的类方法（用类名来引用），并在参数列表中引入待绑定的对象（self），从而达到调用父类的目的。这样做的缺点是，当一个子类的父类发生变化时（如类B的父类由A变为C时），必须遍历整个类定义，把所有的通过非绑定的方法的类名全部替换过来。</p>
<p>自python2.2开始，python添加了一个关键字<strong>super</strong>来解决这个问题。官方说明如下：<br><a id="more"></a></p>
<blockquote>
<p>super(type[, object-or-type])</p>
<p>Return the superclass of type. If the second argument is omitted the super object returned is unbound. If the second argument is an object,  isinstance(obj, type) must be true. If the second argument is a type, issubclass(type2, type) must be true. super() only works for new-style classes.</p>
<p>A typical use for calling a cooperative superclass method is:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span><span class="params">(B)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">meth</span><span class="params">(self, arg)</span>:</span></span><br><span class="line">        super(C, self).meth(arg)</span><br></pre></td></tr></table></figure>
<p>New in version 2.2.</p>
</blockquote>
<p>因此改写后的类B代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span><span class="params">(object)</span>:</span>    <span class="comment"># A must be new-style class</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"enter A"</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"leave A"</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span><span class="params">(C)</span>:</span>     <span class="comment"># A --&gt; C</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"enter B"</span></span><br><span class="line">        super(B, self).__init__()</span><br><span class="line">        <span class="keyword">print</span> <span class="string">"leave B"</span></span><br></pre></td></tr></table></figure>
<p>其运行结果与第一种方法一致。</p>
<hr>
<p>super的引入同时也解决了涉及多继承情况时父类的多次调用问题，考虑如下代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">         <span class="keyword">print</span> <span class="string">"Enter A"</span></span><br><span class="line">         <span class="keyword">print</span> <span class="string">"Leave A"</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span><span class="params">(A)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"Enter B"</span></span><br><span class="line">        A.__init__(self)</span><br><span class="line">        <span class="keyword">print</span> <span class="string">"Leave B"</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span><span class="params">(A)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"Enter C"</span></span><br><span class="line">        A.__init__(self)</span><br><span class="line">        <span class="keyword">print</span> <span class="string">"Leave C"</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">D</span><span class="params">(A)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"Enter D"</span></span><br><span class="line">        A.__init__(self)</span><br><span class="line">        <span class="keyword">print</span> <span class="string">"Leave D"</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">E</span><span class="params">(B, C, D)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"Enter E"</span></span><br><span class="line">        B.__init__(self)</span><br><span class="line">        C.__init__(self)</span><br><span class="line">        D.__init__(self)</span><br><span class="line">        <span class="keyword">print</span> <span class="string">"Leave E"</span></span><br><span class="line"></span><br><span class="line">e = E()</span><br></pre></td></tr></table></figure>
<p>结果如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Enter E</span><br><span class="line">Enter B</span><br><span class="line">Enter A</span><br><span class="line">Leave A</span><br><span class="line">Leave B</span><br><span class="line">Enter C</span><br><span class="line">Enter A</span><br><span class="line">Leave A</span><br><span class="line">Leave C</span><br><span class="line">Enter D</span><br><span class="line">Enter A</span><br><span class="line">Leave A</span><br><span class="line">Leave D</span><br><span class="line">Leave E</span><br></pre></td></tr></table></figure>
<p>其中公共父类A被执行了多次。<br>将其中的类名引用换为super:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">         <span class="keyword">print</span> <span class="string">"Enter A"</span></span><br><span class="line">         <span class="keyword">print</span> <span class="string">"Leave A"</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span><span class="params">(A)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"Enter B"</span></span><br><span class="line">        super(B, self)__init__()</span><br><span class="line">        <span class="keyword">print</span> <span class="string">"Leave B"</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span><span class="params">(A)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"Enter C"</span></span><br><span class="line">        super(C, self)__init__()</span><br><span class="line">        <span class="keyword">print</span> <span class="string">"Leave C"</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">D</span><span class="params">(A)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"Enter D"</span></span><br><span class="line">        super(D, self)__init__()</span><br><span class="line">        <span class="keyword">print</span> <span class="string">"Leave D"</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">E</span><span class="params">(B, C, D)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"Enter E"</span></span><br><span class="line">        super(E, self)__init__()</span><br><span class="line">        <span class="keyword">print</span> <span class="string">"Leave E"</span></span><br><span class="line"></span><br><span class="line">e = E()</span><br></pre></td></tr></table></figure>
<p>执行结果如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Enter E</span><br><span class="line">Enter B</span><br><span class="line">Enter C</span><br><span class="line">Enter D</span><br><span class="line">Enter A</span><br><span class="line">Leave A</span><br><span class="line">Leave D</span><br><span class="line">Leave C</span><br><span class="line">Leave B</span><br><span class="line">Leave E</span><br></pre></td></tr></table></figure>
<p>在super机制中能够保证公共父类仅被执行一次，且执行的顺序按照MRO进行（E.__mro__）。</p>
<hr>
<p>super在使用中有下列需要注意的地方：</p>
<ol>
<li>super并不是一个函数，是一个类名，形如super(B, self)事实上调用了super类的初始化函数，产生了一个super对象；</li>
<li>super类的初始化函数并没有做什么特殊的操作，只是简单记录了类类型和具体实例；</li>
<li>super(B, self).func的调用并不是用于调用当前类的父类的func函数；</li>
<li>Python的多继承类是通过mro的方式来保证各个父类的函数被逐一调用，而且保证每个父类函数只调用一次（如果每个类都使用super）；</li>
<li>混用super类和非绑定的函数是一个危险行为，这可能导致应该调用的父类函数没有调用或者一个父类函数被调用多次。</li>
</ol>
<hr>
<p>参考资料：</p>
<ol>
<li><a href="http://www.jb51.net/article/66912.htm" title="Python 中的super用法详解" target="_blank" rel="external">Python 中的super用法详解</a></li>
<li><a href="http://www.cnblogs.com/dkblog/archive/2011/02/24/1980654.html" title="关于Python的super用法研究" target="_blank" rel="external">关于Python的super用法研究</a></li>
</ol>
]]></content>
    <summary type="html">
    <![CDATA[<p>Python中子类要调用父类的方法（method），在python2.2之前通常的写法如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__inti__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"enter A"</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"leave A"</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"enter B"</span></span><br><span class="line">        A.__init__(self)</span><br><span class="line">        <span class="keyword">print</span> <span class="string">"leave B"</span></span><br></pre></td></tr></table></figure>
<p>即使用非绑定的类方法（用类名来引用），并在参数列表中引入待绑定的对象（self），从而达到调用父类的目的。这样做的缺点是，当一个子类的父类发生变化时（如类B的父类由A变为C时），必须遍历整个类定义，把所有的通过非绑定的方法的类名全部替换过来。</p>
<p>自python2.2开始，python添加了一个关键字<strong>super</strong>来解决这个问题。官方说明如下：<br>]]>
    
    </summary>
    
      <category term="python" scheme="http://libhappy.com/tags/python/"/>
    
      <category term="super" scheme="http://libhappy.com/tags/super/"/>
    
      <category term="编程" scheme="http://libhappy.com/tags/%E7%BC%96%E7%A8%8B/"/>
    
      <category term="调用" scheme="http://libhappy.com/tags/%E8%B0%83%E7%94%A8/"/>
    
      <category term="Python" scheme="http://libhappy.com/categories/Python/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Python 类的多重继承]]></title>
    <link href="http://libhappy.com/2015/08/python-class-re-order/"/>
    <id>http://libhappy.com/2015/08/python-class-re-order/</id>
    <published>2015-08-15T08:14:10.000Z</published>
    <updated>2015-10-26T14:14:17.002Z</updated>
    <content type="html"><![CDATA[<p>Python 的类分为经典类与新式类。Python2.7之前的版本中可以采用经典类，经典类继承父类的顺序采用深度优先算法，但在Python3之后的版本就只承认新式类了。新式类在python2.2之后的版本中都可以使用，新式类的继承顺序采用C3算法，其继承顺序可以通过查看MRO列表获取。<br><a id="more"></a></p>
<h1 id="经典类与新式类的区别">经典类与新式类的区别</h1><ol>
<li><p>经典类是默认没有派生自某个基类的，而新式类默认派生自<code>object</code>基类：</p>
 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># old style</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># new style</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>经典类在类多重继承的时候是采用的从左至右深度优先的匹配方法，而新式类采用C3算法（不同于广度优先）进行匹配的。</p>
</li>
<li><p>经典类没有<code>__MRO__</code>和<code>instance.mro()</code>调用，而新式类有。</p>
</li>
</ol>
<h1 id="经典类中的继承问题">经典类中的继承问题</h1><p>经典类中采用<strong>深度优先</strong>的匹配方法，可能导致在查询继承树中绕过后面的父类：<br><!--more--><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">D</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"class D"</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span><span class="params">(D)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span><span class="params">(D)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"class C"</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span><span class="params">(B, C)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">f = A()</span><br><span class="line">f.foo()</span><br></pre></td></tr></table></figure></p>
<p>其输出为：class D。<br>新式类采用<strong>C3算法</strong>（区别于<strong>广度优先</strong>的原则）进行搜索，若使用新式类：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">D</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"class D"</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span><span class="params">(D)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span><span class="params">(D)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"class C"</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span><span class="params">(B, C)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">f = A()</span><br><span class="line">f.foo()</span><br></pre></td></tr></table></figure></p>
<p>输出为：class C<br>搜索的顺序如下图所示：</p>
<img src="https://farm1.staticflickr.com/678/21780464824_b470a6eab4.jpg" title="Python中类的方法解析顺序" alt="python_old_26new_class">
<h1 id="C3算法">C3算法</h1><p><strong>C3算法</strong>最早被提出是用于Lisp的，应用在Python中是为了解决原来基于深度优先搜索算法不满足本地优先级，和单调性的问题。</p>
<ul>
<li><strong>本地优先级</strong>：指声明时父类的顺序，比如C(A,B)，如果访问C类对象属性时，应该根据声明顺序，优先查找A类，然后再查找B类。</li>
<li><strong>单调性</strong>：如果在C的解析顺序中，A排在B的前面，那么在C的所有子类里，也必须满足这个顺序。</li>
</ul>
<p><strong>深度优先搜索</strong>用栈（stack）来实现，整个过程可以想象成一个倒立的树形：</p>
<ol>
<li>把根节点压入栈中。</li>
<li>每次从栈中弹出一个元素，搜索所有在它下一级的元素，把这些元素压入栈中。并把这个元素记为它下一级元素的前驱。</li>
<li>找到所要找的元素时结束程序。</li>
<li>如果遍历整个树还没有找到，结束程序。</li>
</ol>
<p><strong>广度优先搜索</strong>使用队列（queue）来实现，整个过程也可以看做一个倒立的树形：</p>
<ol>
<li>把根节点放到队列的末尾。</li>
<li>每次从队列的头部取出一个元素，查看这个元素所有的下一级元素，把它们放到队列的末尾。并把这个元素记为它下一级元素的前驱。</li>
<li>找到所要找的元素时结束程序。</li>
<li>如果遍历整个树还没有找到，结束程序。</li>
</ol>
<p>对于同一段程序：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"A"</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span><span class="params">(A)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"B"</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span><span class="params">(B)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"C"</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">D</span><span class="params">(A)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"D"</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">E</span><span class="params">(D)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"E"</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">F</span><span class="params">(C, E)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"F"</span></span><br><span class="line"></span><br><span class="line">f = F()</span><br><span class="line">f.foo1()</span><br></pre></td></tr></table></figure></p>
<p>当使用深度优先搜索，广度优先搜索及C3算法的不同搜索顺序如下：<br><strong>深度优先搜索</strong>(FCBAED)<br><img src="https://farm1.staticflickr.com/592/21782098993_467910d598.jpg" title="DFS深度优先搜索" alt="resolution_order-deep-first-search"></p>
<p><strong>广度优先搜索</strong>(FCEBDA)</p>
<img src="https://farm1.staticflickr.com/651/22215216660_42133913bb.jpg" title="BFS广度优先搜索" alt="resolution_order-broad-first-search">
<p><strong>C3算法</strong>(FCBEDA)</p>
<img src="https://farm1.staticflickr.com/661/22215486608_17a874a876.jpg" title="C3算法" alt="resolution_order-C3-search">
<p>对于新式类，可以用<code>instance.__mro__</code>或<code>instance.mro()</code>来查看其MRO（Method Resolution Order 方法解析顺序）列表。对于上文代码中的类<code>F</code>的MRO如下：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print F.mro()</span><br><span class="line">(&lt;class '__main__.F'&gt;, &lt;class '__main__.C'&gt;, &lt;class '__main__.B'&gt;, &lt;class '__main__.E'&gt;, &lt;class '__main__.D'&gt;, &lt;class '__main__.A'&gt;, &lt;type 'object'&gt;)</span><br></pre></td></tr></table></figure></p>
<p>即C3算法的解析结果。<br>同时为了解决多重继承中的调用父类问题，python2.2之后引入了<code>super</code>。</p>
<hr>
<p>参考资料：</p>
<ol>
<li><a href="http://python-history.blogspot.com/2010/06/method-resolution-order.html" title="Method Resolution Order" target="_blank" rel="external">Method Resolution Order</a></li>
<li><a href="http://www.jb51.net/article/57263.htm" title="Python类的多重继承问题深入分析" target="_blank" rel="external">Python类的多重继承问题深入分析</a></li>
<li><a href="http://blog.csdn.net/imzoer/article/details/8737642" title="python类学习以及mro--多继承属性查找机制 " target="_blank" rel="external">python类学习以及mro–多继承属性查找机制 </a></li>
<li><a href="http://demo.netfoucs.com/icode0410/article/details/39400233" title="Python 类继承，__bases__, __mro__, super " target="_blank" rel="external">Python 类继承，__bases__, __mro__, super </a></li>
</ol>
]]></content>
    <summary type="html">
    <![CDATA[<p>Python 的类分为经典类与新式类。Python2.7之前的版本中可以采用经典类，经典类继承父类的顺序采用深度优先算法，但在Python3之后的版本就只承认新式类了。新式类在python2.2之后的版本中都可以使用，新式类的继承顺序采用C3算法，其继承顺序可以通过查看MRO列表获取。<br>]]>
    
    </summary>
    
      <category term="class" scheme="http://libhappy.com/tags/class/"/>
    
      <category term="python" scheme="http://libhappy.com/tags/python/"/>
    
      <category term="继承" scheme="http://libhappy.com/tags/%E7%BB%A7%E6%89%BF/"/>
    
      <category term="编程" scheme="http://libhappy.com/tags/%E7%BC%96%E7%A8%8B/"/>
    
      <category term="Python" scheme="http://libhappy.com/categories/Python/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[编写第一个PyQt4程序]]></title>
    <link href="http://libhappy.com/2015/07/pyqt4-tutorial-01/"/>
    <id>http://libhappy.com/2015/07/pyqt4-tutorial-01/</id>
    <published>2015-07-07T09:30:17.000Z</published>
    <updated>2015-10-26T14:15:55.057Z</updated>
    <content type="html"><![CDATA[<p>PyQt是Qt库的Python版本，该教程是 <a href="http://zetcode.com/gui/pyqt4/" target="_blank" rel="external">zetcode</a> PyQt4教程的中文翻译。<br>本文主要介绍了PyQt4的基本使用方法及基本窗口的绘制。<br><a id="more"></a></p>
<h1 id="简单示例">简单示例</h1><p>第一个程序显示一个简单的窗口。<br>以下是原始代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="string">"""</span><br><span class="line">Created on Sat Jul 04 21:23:31 2015</span><br><span class="line"></span><br><span class="line">@author: Arthur</span><br><span class="line">an example for PyQt4 gui program.</span><br><span class="line">"""</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> PyQt4 <span class="keyword">import</span> QtGui    <span class="comment"># 导入必要的模块</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    app = QtGui.QApplication(sys.argv)   <span class="comment"># 创建一个应用对象，sys.argv为命令行传入的参数</span></span><br><span class="line"></span><br><span class="line">    window = QtGui.QWidget() <span class="comment"># QtGui.Qwidget 是所有界面对象的基础类，没有父类的部件称为窗口</span></span><br><span class="line">    window.resize(<span class="number">250</span>, <span class="number">150</span>) <span class="comment"># 调整部件大小，250px宽150px高</span></span><br><span class="line">    window.move(<span class="number">300</span>, <span class="number">300</span>)  <span class="comment"># 移动部件的位置到屏幕 (x = 300, y = 300)处</span></span><br><span class="line">    window.setWindowTitle(<span class="string">'Simple'</span>) <span class="comment"># 设置窗口标题栏显示的标题</span></span><br><span class="line">    window.show() <span class="comment"># 在内存中创建组件并显示在屏幕上</span></span><br><span class="line"></span><br><span class="line">    sys.exit(app.exec_()) <span class="comment"># sys.exit()保证程序完全的退出</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>
<p>显示窗口如下：</p>
<img src="https://farm6.staticflickr.com/5793/22215503798_0382018900_m.jpg" title="简单的窗口" alt="1_first_1">
<h1 id="添加应用图标(Application_icon)">添加应用图标(Application icon)</h1><p>添加在标题栏左上角显示的应用图标，代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="string">"""</span><br><span class="line">Created on Sat Jul 04 21:54:19 2015</span><br><span class="line"></span><br><span class="line">@author: Arthur</span><br><span class="line">A gui program with application icon.</span><br><span class="line">use OOP(Object Oriented Programming)</span><br><span class="line">"""</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> PyQt4 <span class="keyword">import</span> QtGui</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Example</span><span class="params">(QtGui.QWidget)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super(Example, self).__init__() <span class="comment"># super() method 返回对象'Example'的父类</span></span><br><span class="line"></span><br><span class="line">        self.initUI()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">initUI</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.setGeometry(<span class="number">300</span>, <span class="number">300</span>, <span class="number">250</span>, <span class="number">150</span>) <span class="comment"># 设置窗口的坐标及大小(x, y, 宽, 高)</span></span><br><span class="line">        self.setWindowTitle(<span class="string">'Icon'</span>)</span><br><span class="line">        self.setWindowIcon(QtGui.QIcon(<span class="string">'web.png'</span>)) <span class="comment"># 设置窗口应用图标</span></span><br><span class="line"></span><br><span class="line">        self.show()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    app = QtGui.QApplication(sys.argv)</span><br><span class="line">    ex = Example()</span><br><span class="line">    sys.exit(app.exec_())</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>
<p>该程序以面向对象的风格书写，面向对象编程中最重要的是类(class)，数据(data)和方法(method)。显示的窗口如下：</p>
<img src="https://farm6.staticflickr.com/5710/22215504998_90237dc62c_m.jpg" title="在标题栏显示程序图标" alt="2_icon_1">
<hr>
<h1 id="显示提示信息">显示提示信息</h1><p>显示部件的气球帮助提示。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="string">"""</span><br><span class="line">Created on Sun Jul 05 11:40:30 2015</span><br><span class="line"></span><br><span class="line">@author: Arthur</span><br><span class="line">show a tooltip</span><br><span class="line">"""</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> PyQt4 <span class="keyword">import</span> QtGui</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Example</span><span class="params">(QtGui.QWidget)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super(Example, self).__init__()</span><br><span class="line">        self.initUI()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">initUI</span><span class="params">(self)</span>:</span></span><br><span class="line">        QtGui.QToolTip.setFont(QtGui.QFont(<span class="string">'SansSerif'</span>, <span class="number">10</span>)) <span class="comment"># 设置提示的字形及字体大小</span></span><br><span class="line">        self.setToolTip(<span class="string">'This is a &lt;b&gt;QWidget&lt;/b&gt; widget'</span>)</span><br><span class="line"></span><br><span class="line">        btn = QtGui.QPushButton(<span class="string">'Button'</span>, self)</span><br><span class="line">        btn.setToolTip(<span class="string">'This is a &lt;b&gt;QPushButton&lt;/b&gt; widget'</span>)</span><br><span class="line">        btn.resize(btn.sizeHint())  <span class="comment"># szieHint() 返回按钮推荐的大小</span></span><br><span class="line">        btn.move(<span class="number">50</span>, <span class="number">50</span>)</span><br><span class="line"></span><br><span class="line">        self.setGeometry(<span class="number">300</span>, <span class="number">300</span>, <span class="number">250</span>, <span class="number">150</span>)</span><br><span class="line">        self.setWindowTitle(<span class="string">'Tooltips'</span>)</span><br><span class="line">        self.show()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    app = QtGui.QApplication(sys.argv)</span><br><span class="line">    ex = Example()</span><br><span class="line">    sys.exit(app.exec_())</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>
<p>显示的窗口如下：</p>
<img src="https://farm6.staticflickr.com/5814/22390057122_b69cfefa95_m.jpg" title="创建有气泡提示的按钮" alt="3_tooltip_2">
<hr>
<h1 id="关闭窗口">关闭窗口</h1><p>以上的例子中都是通过点击窗口右上角的<code>X</code>来关闭窗口，下面的例子演示了通过程序内的方法关闭窗口。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="string">"""</span><br><span class="line">Created on Sun Jul 05 12:24:44 2015</span><br><span class="line">@author: Arthur</span><br><span class="line">A button with quit</span><br><span class="line">"""</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> PyQt4 <span class="keyword">import</span> QtGui, QtCore</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Example</span><span class="params">(QtGui.QWidget)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super(Example, self).__init__()</span><br><span class="line">        self.initUI()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">initUI</span><span class="params">(self)</span>:</span></span><br><span class="line">        qbtn = QtGui.QPushButton(<span class="string">'Quit'</span>, self) <span class="comment"># 参数分别为按钮的标签及按钮的父类</span></span><br><span class="line">        qbtn.clicked.connect(QtCore.QCoreApplication.instance().quit)</span><br><span class="line"></span><br><span class="line">        qbtn.resize(qbtn.sizeHint())</span><br><span class="line">        qbtn.move(<span class="number">50</span>, <span class="number">50</span>)</span><br><span class="line"></span><br><span class="line">        self.setGeometry(<span class="number">300</span>, <span class="number">300</span>, <span class="number">250</span>, <span class="number">150</span>)</span><br><span class="line">        self.setWindowTitle(<span class="string">'Tooltips'</span>)</span><br><span class="line">        self.show()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    app = QtGui.QApplication(sys.argv)</span><br><span class="line">    ex = Example()</span><br><span class="line">    sys.exit(app.exec_())</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>
<p>该程序创建了<code>QtGui.QPushButton</code>类的一个实例<code>qbtn</code>，在以下的语句中赋予了该按钮关闭程序的功能：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">qbtn.clicked.connect(QtCore.QCoreApplication.instance().quit)</span><br></pre></td></tr></table></figure>
<p>PyQt4中的事件处理是由信号（signals）与槽（slots）机制实现的，如果点击按钮，将会发出<code>clicked()</code>的信号。槽可以是PyQt的槽或者是Python可调用的方法。通过使用<code>QtCore.QObject.connect()</code>方法将信号和槽链接起来。<code>QtCore.QCoreApplication</code> 包含了主要的事件循环，它处理和分配所有的事件。<code>instance()</code>方法返回它自己的实例。 应该注意的是<code>QtCore.QCoreApplication</code>同<code>QtGui.QApplication</code>一起被创建。点击信号连接到PyQt中预先定义的<code>quit()</code>槽。至此信号发送方与接收方之间的通信完成，发送方为点击按钮，接收方为程序对象。</p>
<img src="https://farm1.staticflickr.com/565/22377226956_789c1b572a_m.jpg" title="使程序退出的按钮" alt="4_quit_button_1">
<hr>
<h1 id="消息框">消息框</h1><p>当点击窗口右上角<code>x</code>退出时弹出确认消息框。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="string">"""</span><br><span class="line">Created on Sun Jul 05 12:38:58 2015</span><br><span class="line">@author: Arthur</span><br><span class="line">show message box</span><br><span class="line">"""</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> PyQt4 <span class="keyword">import</span> QtGui</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Example</span><span class="params">(QtGui.QWidget)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super(Example, self).__init__()</span><br><span class="line"></span><br><span class="line">        self.initUI()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">initUI</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.setGeometry(<span class="number">300</span>, <span class="number">300</span>, <span class="number">250</span>, <span class="number">150</span>)</span><br><span class="line">        self.setWindowTitle(<span class="string">'Message box'</span>)</span><br><span class="line">        self.show()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">closeEvent</span><span class="params">(self, event)</span>:</span></span><br><span class="line">        reply = QtGui.QMessageBox.question(self, <span class="string">'Message'</span>,</span><br><span class="line">        <span class="string">"Are you sure to quit?"</span>, QtGui.QMessageBox.Yes |</span><br><span class="line">        QtGui.QMessageBox.No, QtGui.QMessageBox.No) <span class="comment"># (消息框标题, 显示消息, 选项 | 选项, 默认选项)</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> reply == QtGui.QMessageBox.Yes:</span><br><span class="line">            event.accept()</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            event.ignore()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    app = QtGui.QApplication(sys.argv)</span><br><span class="line">    ex = Example()</span><br><span class="line">    sys.exit(app.exec_())</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>
<img src="https://farm6.staticflickr.com/5678/22216388499_4a2df52106_m.jpg" title="点击关闭后弹出确认消息框" alt="5_message_box_1">
<p>如果要关闭<code>QWidget</code>，<code>QCloseEvent</code>事件就会产生。要修改<code>QWidget</code>的默认行为，就需要重载父类中的<code>closeEvent()</code>方法。点击关闭按钮后，弹出如下对话框：</p>
<img src="https://farm6.staticflickr.com/5815/22377228426_c71f00748e_m.jpg" title="确认关闭消息框" alt="5_message_box_2">
<p>点击<code>Yes</code>或<code>No</code>后，对<code>replay</code>值进行比较，如果为<code>Yes</code>则接收事件关闭窗口，相反则忽略事件。</p>
<hr>
<h1 id="居中窗口">居中窗口</h1><p>在屏幕中央显示窗口。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="string">"""</span><br><span class="line">Created on Sun Jul 05 14:42:27 2015</span><br><span class="line">@author: Arthur</span><br><span class="line">centering window on the screen</span><br><span class="line">"""</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> PyQt4 <span class="keyword">import</span> QtGui</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Example</span><span class="params">(QtGui.QWidget)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super(Example, self).__init__()</span><br><span class="line"></span><br><span class="line">        self.initUI()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">initUI</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.resize(<span class="number">250</span>, <span class="number">150</span>)</span><br><span class="line">        self.center()</span><br><span class="line"></span><br><span class="line">        self.setWindowTitle(<span class="string">'Center'</span>)</span><br><span class="line">        self.show()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">center</span><span class="params">(self)</span>:</span></span><br><span class="line">        qr = self.frameGeometry() <span class="comment"># 返回代表窗口框架结构的矩形</span></span><br><span class="line">        cp = QtGui.QDesktopWidget().availableGeometry().center() <span class="comment"># 返回屏幕（可显示区域）的中心点</span></span><br><span class="line">        qr.moveCenter(cp) <span class="comment"># 将与窗口同大的矩形移动到屏幕中央</span></span><br><span class="line">        self.move(qr.topLeft())  <span class="comment"># 将主窗口移动到已定位的矩形处，QWidget的移动以左上角为基准点</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    app = QtGui.QApplication(sys.argv)</span><br><span class="line">    ex = Example()</span><br><span class="line">    sys.exit(app.exec_())</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>
<p>通过<code>frameGeometry()</code>获得代表窗口框架结构的矩形，通过<code>availableGeometry().center()</code>获得屏幕（可显示区域）的中心点，用<code>moveCenter()</code>方法将该框架矩形移动到屏幕中央，再将主窗口移动到已定位的矩形处。<br>由于移动窗口组件时是以组件的右上角为基准点，所以不能用<del><code>self.move(cp)</code></del>移动窗口到中心。<br>也可以在获得屏幕与窗口几何参数后直接移动窗口的左上角到计算出的目的位置：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">screen = QtGui.QDesktopWidget().screenGeometry() <span class="comment"># 获得屏幕形状参数</span></span><br><span class="line">size = self.geometry() <span class="comment"># 获得窗口形状参数</span></span><br><span class="line">self.move((screen.width() - size.width()) / <span class="number">2</span>, (screen.height() - size.height()) / <span class="number">2</span>) <span class="comment"># 计算出窗口左上角移动后的位置，再直接移动窗口</span></span><br></pre></td></tr></table></figure>
<hr>
<p>参考资料：</p>
<ol>
<li>First Program in PyQt4 from <a href="http://zetcode.com/gui/pyqt4/firstprograms/" title="First Program" target="_blank" rel="external">zetcode</a></li>
</ol>
]]></content>
    <summary type="html">
    <![CDATA[<p>PyQt是Qt库的Python版本，该教程是 <a href="http://zetcode.com/gui/pyqt4/">zetcode</a> PyQt4教程的中文翻译。<br>本文主要介绍了PyQt4的基本使用方法及基本窗口的绘制。<br>]]>
    
    </summary>
    
      <category term="gui" scheme="http://libhappy.com/tags/gui/"/>
    
      <category term="pyqt4" scheme="http://libhappy.com/tags/pyqt4/"/>
    
      <category term="python" scheme="http://libhappy.com/tags/python/"/>
    
      <category term="zetcode" scheme="http://libhappy.com/tags/zetcode/"/>
    
      <category term="编程" scheme="http://libhappy.com/tags/%E7%BC%96%E7%A8%8B/"/>
    
      <category term="PyQt4" scheme="http://libhappy.com/categories/PyQt4/"/>
    
  </entry>
  
</feed>
